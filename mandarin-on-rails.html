<!DOCTYPE HTML>
<!--Story by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)-->

<html>
	<head>
		<title>James McGlynn</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/coreui-icons-master/css/all.min.css" />
		<link rel="stylesheet" href="assets/css/custom.css" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<link rel="icon" type="image/x-icon" href="favicon.ico">
		<link rel="stylesheet" href="assets/css/floating-nav.css" />
	</head>

	<body>

		<!-- Floating Nav -->
		<div class="floating-nav">
			<div class = "floating-nav-bg"></div>
			<div class = "floating-nav-icons-container">
				<ul>
					<li><a class="nav smooth-scroll" href="#welcome"><span>Top</span><i class="nav fas fa-chevron-up"></i></a></li>
					<li><a class="nav" href="index.html"><span>Home</span><i class="nav fas fa-home"></i></a></li>
					<li><a class="nav" href="about-me.html"><span>About Me</span><i class="nav fas fa-portrait"></i></a></li>
					<li><a class="nav" target = "_blank" href="https://github.com/wantsomechocolate/mandarin_on_rails"><span>Github Repo</span><i class="nav fas cib cib-github"></i></a></li>
					<li><a class="nav" target = "_blank" href="https://mandarinonrails-owawhtdoha-uc.a.run.app/"><span>Website</span><i class="nav fas fa-globe"></i></a></li>
					<li><a class="nav" href="threemusesglass.html"><span>Next Project</span><i class="nav fas fa-chevron-right"></i></a></li>
				</ul>
			</div>
			<div class = "floating-nav-trigger"><a class="floating-nav-trigger-style"><i class="fas fa-bars"></i></a></div>
		</div>


		<!-- Wrapper -->
		<div id="wrapper" class="divided">

			<!-- Mosaic Maker Banner -->
			<section class="banner style2 orient-left content-align-center image-position-center fullscreen onload-image-fade-in onload-content-fade-right" id="welcome">
				<div class="content">
					<h1>Mandarin on Rails</h1>
					<p><i>Ruby, Ruby on Rails, Google Cloud Services (Cloud Run, Cloud Storage, Secrets), Docker, DataTables</i></p>
					<p class="major">A web application to segment Chinese text into words and other repeated sequences of characters</p>
					<a target="_blank" href="https://github.com/wantsomechocolate/mandarin_on_rails" class="button small wide">Github Repo</a>
				</div>
				<div class="image">
					<img src="https://i.imgur.com/hyFi8zE.jpg" alt="" />
				</div>
			</section>



			<section class="banner style1 orient-right content-align-center image-position-center onscroll-image-fade-in fullscreen">
				<div class="content">
					<h1>Thy Why</h1>
					<p> There already exist tools similar to this one, but this will definitely have some unique functionality when I'm done with it and it will have been a fun way to learn rails and google cloud services.</p>

					<p>I'm actively working on this project so it will have some bugs and might be down intermittently! But I just wanted to get it on the portfolio for now. </p>

					<p>Also, it takes about 10 seconds to load the first time because it doesn't get traffic, so be patient if you actually want to check it out.</p>
				</div>
				<div class="image">
					<img src="https://i.imgur.com/BdyUXXy.jpg" alt="" />
				</div>
			</section>

			<section class="banner style1 orient-left content-align-center image-position-center onscroll-image-fade-in fullscreen">
				<div class="content">
					<h1>Stay Tuned!</h1>
					<p></p>
				</div>
				<div class="image">
					<img src="https://i.imgur.com/l45mavd.jpg" alt="" />
				</div>
			</section>

			<!-- Footer -->
			<section class="banner style3 orient-left content-align-center image-position-center fullscreen onscroll-image-fade-in" id="footer">
				<div class="content">
					<h2 class="header-custom">James McGlynn</h2>
					<p><i>Engineer, Programmer</i></p>
					<p></p>
					<ul class="icons ul-custom">
						<li>
							<a target="_blank" href="https://github.com/wantsomechocolate" class="icon brands style2 fa-github">
								<i class="label">Github</i>
							</a>
						</li>
						<li>
							<a target="_blank" href="https://stackoverflow.com/users/1937423/wantsomechocolate" class="icon brands style2 fa-stack-overflow">
								<i class="label">StackOverflow</i>
							</a>
						</li>
						<li>
							<a target="_blank" href="https://www.linkedin.com/in/james-mcglynn/" class="icon brands style2 fa-linkedin-in">
								<i class="label">LinkedIn</i>
							</a>
						</li>
						<li>
							<a target="_blank" href="https://leetcode.com/wantsomechocolate/" class="icon style2 icon-test icon-custom style2-custom">
								<i class="label-custom cib-leetcode"></i>
							</a>
						</li>
						<li>
							<a target="_blank" href="https://www.facebook.com/JGlynnius" class="icon brands style2 fa-facebook-f">
								<span class="label">Facebook</span>
							</a>
						</li>

						<li>
							<a target="_blank" href="https://www.instagram.com/wantsomegraham/" class="icon brands style2 fa-instagram">
								<span class="label">Instagram</span>
							</a>
						</li>
					</ul>
				</div>
				<div class="image">
					<img src="https://i.imgur.com/Pth5VeM.jpg" alt="" />
				</div>
			</section>

		</div>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>		
		<script src="assets/js/custom.js"></script>

	</body>
</html>









<!-- 

The Why
The main impetus behind this project was to use an entierly new "tech stack" than the one I usually use for my projects. Ruby instead of python, Rails, instead of Django, Google Cloud Services instead of Amazon Web Services, I still used postgres though :/

The secondary reason was to have a project where I stufy mandarin and programaming at the same time! And that definitely did work, at least a little bit. 

The How
Doing a project in rails with no prior Ruby experience was definitely challenging. To be honest, I was expecting way more railings. There were no admin pages, no users, no user roles, each one requiring either a gem or two.
I did some research and it seemed like Devise was the most common answer to user authentication in rails, but in their readme they say that if you are new to rails, DON'T use devise. Which is kind of strange to me that someone would write some software and tell people not to use it. I probably should have listened to their advice, but the one good thing about it was that I wanted guest users and there was already a gem for guest users in devisee

 I learned through some research that Devise was the go to gem for user authentication, but in the readme for it, they actual recommend NOT using devise for your first rails project and building user authentication from scratch instead. That's more like Ruby on the top of a moderately tall building with no parapet and devise is booting you off. 


So I went through the tutorial a couple of times, started getting the hang of the rails workflow for creating and modifying models, configuring routes, and updating controllers and views to get the user experience I wanted. But then I got to the javascript. I'm not sure if it was an issue with turbo, or an incompatibility with the HTML5 template I chose and DataTables (the javascript library I used to add filtering and sorting functionality to my html tables), but I spent about a week trying to figure out hotwire, turbo, stimulus and going through the html5 template and datatables javascript, to no avail. There were two main issues, the first was that clicking anything interactive on the datatable would cause the left navigation bar to move slightly to the left. If you sorted enough times, then the left navigation would just dissappear completely. This only happened at the largest media width for some reason, the difference being that smaller width screens, the left hand pane was hidden by default. So I modified the template to hide the pane by default on all screen widths, but that wasn't the biggest problem. 

The biggest problem was that the menu button would not work if I followed a link to a page, but only after refreshing the page. I tried some suggested solutions, but rails 7 is somewhat new and there were not that many answers to choose from. I ended up completely disabling turbo for a bit, but then I noticed that I actually did like some of the functionality it provided, mainly that nice loading bar at the top of the page when the page is loading new content. In the end I just changed html5 templates. I still had to do some rejigerring, but in the end datatables, my menu button, AND turbo were all peacfully co-existing. 

Then I found out that devise doesn't handle user roles, only user authentication. Any authenticated user can view anyone else's records. I installed the cancancan gem which was quite easy to setup initially, but then I realized it broke my devise guest user setup, but that wasn't too hard to fix.

So I had a working site, with guest users, user registration and login, I got email working in order to send activation links, but I found that devise flash messages were not working. In some cases, devise was just appending the flash message AFTER the body of my html. I did some googling and apparently there had been a known issue between rails 7 and devise. So I tried everything I could think of, everything I could find, different ways to render the flash messages, overriding the devise failure app to change the way devise generated flash messages and nothing was working, I still wasn't able to see any flash messages. I spent on and off over a week trying to figure this out. Sometimes the flash messages would stop appearing at the bottom of the page, but they still wouldn't appear like I was seeing in everyone else's posts/solutions. Was it turbo again >:|  No, it was that they were appearing behind the navigation bar and I couldn't see them. I finally figured this out by applying bootstrap styles to them which causes the message to be thick enough where it poked out below the bottom of the header. So I just moved where I was putting flash messages in the layout and applied a tiny bit of custom css and finally put that one to bed.

Now that I have the skeleton setup I am taking a break and hope to be back to add some functionality later on.

Thanks for reading. 




Explanation and Examples

Project Description
This application is meant as a tool to facilitate the consumption of Chinese text by those that are students of the language. The main functionality it provides is the partitioning of Chinese text into subsequences, called shingles. Shingles are subsquences of a body of text that may overlap with eachother, like shingles on a roof. It provides this information in a table that can be sorted, filtered, and exported in a format that can then be imported into Pleco, the de-facto standard in Chinese to English dictionaries. 

The Algorithms
I'm using two different methods for segmenting the input texts. One to find sequences of characters that appear in the reference dictionary (words), and one to find repeated sequences of characters that were not found in the dictionary (tokens). 

1.)Words: To find words I use a longest matching algorithm where I find the longest dictionary entry starting at each index of the input text (I actually use a trie for this!). But I only add words to the output if they reach a new "high-point" in the text (e.g. if ABC and BC are both dictionary entries, BC won't be added to the output when ABC appears in the input text because they both have the same ending index (high-point) in the input text).

2.)Tokens: I find tokens by keeping track of the count of all unique subsequences from length 1 to max_token_length, then I remove any token that has the same count as any longer token that completely contains it (i.e. any token that only ever appears as part of longer tokens is not included in the output). I also remove tokens that appear in the dictionary, don't appear more than min_count times, and are shorter than min_token_length. 


Other Features
Once the tokens are generated, the rest of the application is just about searching, sorting, pruning, and exporting the shingles list in a format that can be used to create flashcards. For searching and filtering, I used DataTables.js. The main functionality I added was to mark words as known so they don't appear in the output list, and exportation in a format that can be directly imported into Pleco. 

Deployment
I'm using Google Cloud Run, Google Secret Manager, Google 



Guest Users
Authentication
User Roles

-->

<!--
Tech Stack

Ruby and Rails for server-side processing.
Puma (the default web-server for Rails)
Google Clound Run for hosting
Postgres

Development Environment

Production Environment



This project was a way to learn a new tech stack and 











































